<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LEGMCTW1RN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-LEGMCTW1RN');
    </script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token Slicer</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="manifest" href="/static/site.webmanifest">
    <link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta og:title="Long PROMPTs Splitter">
    <meta og:description="Tool for safely process chunks of up to 15,000 characters per request">
    <meta og:image="https://opengraph.githubassets.com/{{ hash }}/jupediaz/chatgpt-prompt-splitter">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header-logo">
          <a href="/"><img src="/static/chatgpt_prompt_splitter.png" alt="Logo" class="logo"/></a>
        </div>
        <div class="header-text">
          <h1>Token Slicer</h1>
          <h2>Split by characters or tokens. Copy chunks fast.</h2>
        </div>
      </div>
      <div class="visits">Visit count: {{ visit_count }}</div>
      <form action="/" method="post">
        <div class="form-group">
          <label for="prompt">Enter the long prompt to be splitted</label>
          <textarea class="form-control" id="prompt" name="prompt" rows="10">{{ prompt }}</textarea>
          <help>Enter the PROMPT that you want to use for the ChatGPT request.</help>
          <div class="char-count-container">
            <span id="prompt-char-count">{{ prompt|length }}</span> characters Â·
            <span id="prompt-token-count" data-mode="{{ mode }}">0</span> tokens
          </div>
        </div>
        <label for="split_length">Max size per part</label>
        <div class="mode-row">
          <label><input type="radio" name="mode" value="chars" {% if mode == 'chars' %}checked{% endif %}> Characters</label>
          <label><input type="radio" name="mode" value="tokens" {% if mode == 'tokens' %}checked{% endif %}> Tokens</label>
          <select name="encoding" id="encoding" {% if mode != 'tokens' %}disabled{% endif %}>
            <option value="cl100k_base" {% if encoding_name == 'cl100k_base' %}selected{% endif %}>cl100k_base (GPT-4/3.5)</option>
            <option value="o200k_base" {% if encoding_name == 'o200k_base' %}selected{% endif %}>o200k_base (GPT-4o)</option>
          </select>
        </div>
        <select name="preset" id="preset" onchange="toggleCustomLength(this)" required>
            <option value="15000" {% if split_length == 15000 or split_length is none or split_length == '' %}selected{% endif %}>General max safe chunk for ChatGPT (15,000)</option>
            <option value="custom" {% if split_length != 8000 and split_length != 15000 and split_length != '' and split_length is not none %}selected{% endif %}>Custom</option>
        </select>
        <input type="number" name="split_length" class="custom-length" id="split_length" min="1" required value="{{ split_length if split_length is not none and split_length != '' else 15000 }}" {% if split_length == 8000 or split_length == 15000 or split_length is none or split_length == '' %}style="display: none;"{% endif %}>
        <div class="form-row" style="margin-top:8px;">
          <label for="overlap" style="margin-right:8px;">Overlap</label>
          <input type="number" name="overlap" id="overlap" min="0" step="1" value="{{ overlap or 0 }}" style="width:120px;">
          <span style="margin-left:6px; font-size: 0.9em; opacity: 0.8;">repeated into next part (matches selected unit)</span>
        </div>
        <help>Choose the max size for each part and optional overlap carried into the next part.</help>
        <button type="submit" id="split-btn" class="{% if btn_disabled %}disabled{% endif %}"{% if btn_disabled %} disabled{% endif%}>Enter a prompt</button>
      </form>
      {% if file_data %}
      <div class="instructions">
        <h3>Instructions</h3>
        <pre id="instructions">The total length of the content that I want to send you is too large to send in only one piece.
        
For sending you that content, I will follow this rule:
        
[START PART 1/10]
this is the content of the part 1 out of 10 in total
[END PART 1/10]
        
Then you just answer: "Received part 1/10"
        
And when I tell you "ALL PARTS SENT", then you can continue processing the data and answering my requests.</pre>
        <button type="button" class="copy-btn" id="copy-instructions-btn" onclick="copyInstructions()">Copy Instructions (first message to send)</button>
        <help>This way we explain ChatGPT how to process the messages we are gonna send.</help>
      </div>
      <div class="buttons-container">
        {% for file in file_data %}
        {% set partNumber = file.name[6:9]|int %}
        {% set totalParts = file.name[13:16]|int %}
        <button class="copy-btn" data-content="{{ file.content }}" onclick="copyToClipboard(this)">Copy part {{ partNumber }}/{{ totalParts }} to clipboard</button>
        {% endfor %}
      </div>
      {% endif %}
      <footer>
        <p>
          <div class="left">MIT licensed</div>
          <div class="right"><a href="https://github.com/Paranjayy/Input-Prompt-Splitter" target="_blank">GitHub</a></div>
        </p>
      </footer>
      
    </div>
    <script src="/static/scripts.js"></script>
  </body>
</html>
